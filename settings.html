<div id="autopulse_settings">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b>ST-AutoPulse</b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down"></div>
        </div>
        <div class="inline-drawer-content">

            <!-- Connection Status -->
            <div id="autopulse_connection_status" class="autopulse-status">
                <span class="autopulse-status-dot" id="autopulse_status_dot"></span>
                <span id="autopulse_status_text">æœªè¿æ¥ / Not Connected</span>
            </div>

            <hr />

            <!-- Main Toggle -->
            <div class="autopulse-row">
                <label class="checkbox_label" for="autopulse_enabled">
                    <input type="checkbox" id="autopulse_enabled" />
                    <span data-i18n="å¯ç”¨è‡ªåŠ¨æ¶ˆæ¯">å¯ç”¨è‡ªåŠ¨æ¶ˆæ¯ / Enable Auto Messages</span>
                </label>
            </div>

            <!-- Interval Setting -->
            <div class="autopulse-row">
                <label for="autopulse_interval">
                    <span data-i18n="æ¶ˆæ¯é—´éš”ï¼ˆåˆ†é’Ÿï¼‰">æ¶ˆæ¯é—´éš” / Interval (min)</span>
                </label>
                <div class="autopulse-interval-control">
                    <input type="range" id="autopulse_interval_range" min="1" max="180" value="30" />
                    <input type="number" id="autopulse_interval_input" min="1" max="180" value="30"
                        class="text_pole autopulse-number-input" />
                </div>
            </div>

            <!-- Timer Status -->
            <div class="autopulse-row" id="autopulse_timer_info" style="display:none;">
                <small>
                    <span class="fa-solid fa-clock"></span>
                    <span id="autopulse_next_trigger">ä¸‹æ¬¡è§¦å‘ï¼šè®¡ç®—ä¸­...</span>
                </small>
            </div>

            <hr />

            <!-- Custom Prompt -->
            <div class="autopulse-row">
                <label for="autopulse_prompt">
                    <span data-i18n="è‡ªå®šä¹‰è§¦å‘æç¤ºè¯">è‡ªå®šä¹‰æç¤ºè¯ / Custom Prompt</span>
                    <small class="autopulse-hint">ï¼ˆç•™ç©ºä½¿ç”¨é»˜è®¤ / Leave empty for defaultï¼‰</small>
                </label>
                <textarea id="autopulse_prompt" class="text_pole autopulse-textarea" rows="3"
                    placeholder="ä¾‹å¦‚ï¼šä¸€æ®µæ—¶é—´è¿‡å»äº†ï¼Œè§’è‰²æƒ³è¦ä¸»åŠ¨è”ç³»ç”¨æˆ·ã€‚æ ¹æ®å½“å‰å¯¹è¯ä¸Šä¸‹æ–‡å’Œè§’è‰²æ€§æ ¼ï¼Œç”Ÿæˆä¸€æ¡è‡ªç„¶çš„ä¸»åŠ¨æ¶ˆæ¯ã€‚"></textarea>
            </div>

            <hr />

            <!-- Desktop Notifications -->
            <div class="autopulse-row">
                <label class="checkbox_label" for="autopulse_notify">
                    <input type="checkbox" id="autopulse_notify" />
                    <span data-i18n="æ¡Œé¢é€šçŸ¥">æ¡Œé¢é€šçŸ¥ / Desktop Notifications</span>
                </label>
            </div>

            <!-- Trigger Now Button -->
            <div class="autopulse-row">
                <div id="autopulse_trigger_now" class="menu_button menu_button_icon">
                    <span class="fa-solid fa-bolt"></span>
                    <span data-i18n="ç«‹å³è§¦å‘ä¸€æ¬¡">ç«‹å³è§¦å‘ / Trigger Now</span>
                </div>
            </div>

            <hr />

            <!-- Scheduled Tasks Section -->
            <div class="autopulse-section-header">
                <b data-i18n="å®šæ—¶ä»»åŠ¡">å®šæ—¶ä»»åŠ¡ / Scheduled Tasks</b>
            </div>

            <div id="autopulse_tasks_list" class="autopulse-tasks-list">
                <!-- Tasks will be dynamically populated -->
                <div class="autopulse-empty-state" id="autopulse_no_tasks">
                    <span class="fa-regular fa-calendar-xmark"></span>
                    <span data-i18n="æš‚æ— å®šæ—¶ä»»åŠ¡">æš‚æ— ä»»åŠ¡ / No Tasks</span>
                </div>
            </div>

            <!-- Add Task Form -->
            <div class="autopulse-add-task">
                <div class="autopulse-row">
                    <input type="text" id="autopulse_task_name" class="text_pole" placeholder="ä»»åŠ¡åç§°ï¼ˆå¦‚ï¼šæ—©å®‰é—®å€™ï¼‰" />
                </div>
                <div class="autopulse-row autopulse-task-time-row">
                    <input type="time" id="autopulse_task_time" class="text_pole" value="09:00" />
                    <select id="autopulse_task_repeat" class="text_pole">
                        <option value="daily">æ¯å¤© / Daily</option>
                        <option value="weekly">æ¯å‘¨ / Weekly</option>
                        <option value="once">ä¸€æ¬¡æ€§ / Once</option>
                    </select>
                </div>
                <div class="autopulse-row" id="autopulse_weekday_row" style="display:none;">
                    <select id="autopulse_task_weekday" class="text_pole">
                        <option value="1">å‘¨ä¸€ / Mon</option>
                        <option value="2">å‘¨äºŒ / Tue</option>
                        <option value="3">å‘¨ä¸‰ / Wed</option>
                        <option value="4">å‘¨å›› / Thu</option>
                        <option value="5">å‘¨äº” / Fri</option>
                        <option value="6">å‘¨å…­ / Sat</option>
                        <option value="0">å‘¨æ—¥ / Sun</option>
                    </select>
                </div>
                <div class="autopulse-row" id="autopulse_date_row" style="display:none;">
                    <input type="date" id="autopulse_task_date" class="text_pole" />
                </div>
                <div class="autopulse-row">
                    <textarea id="autopulse_task_prompt" class="text_pole autopulse-textarea" rows="2"
                        placeholder="ä»»åŠ¡æç¤ºè¯ï¼ˆç•™ç©ºä½¿ç”¨é»˜è®¤ï¼‰"></textarea>
                </div>
                <div class="autopulse-row">
                    <div id="autopulse_add_task_btn" class="menu_button menu_button_icon">
                        <span class="fa-solid fa-plus"></span>
                        <span data-i18n="æ·»åŠ ä»»åŠ¡">æ·»åŠ ä»»åŠ¡ / Add Task</span>
                    </div>
                </div>
            </div>

            <hr />

            <!-- Pressure / Anxiety System -->
            <div class="autopulse-section-header">
                <b data-i18n="æƒ…ç»ªå‹åŠ›ç³»ç»Ÿ">æƒ…ç»ªå‹åŠ›ç³»ç»Ÿ / Emotional Pressure</b>
            </div>

            <div class="autopulse-row">
                <label class="checkbox_label" for="autopulse_pressure_enabled">
                    <input type="checkbox" id="autopulse_pressure_enabled" />
                    <span data-i18n="å¯ç”¨å‹åŠ›ç³»ç»Ÿ">å¯ç”¨å‹åŠ›ç³»ç»Ÿ / Enable Pressure</span>
                </label>
                <small class="autopulse-hint">ï¼ˆè§’è‰²ç­‰å¾…è¶Šä¹…è¶Šç„¦è™‘ / Character gets anxious the longer you're awayï¼‰</small>
            </div>

            <div class="autopulse-row">
                <label>
                    <span>å½“å‰å‹åŠ›ç­‰çº§ / Current Levelï¼š</span>
                    <span id="autopulse_pressure_display" class="autopulse-pressure-indicator">ğŸ˜Š ç­‰çº§ 0</span>
                </label>
            </div>

            <div class="autopulse-row">
                <label for="autopulse_pressure_max">
                    <span>æœ€å¤§å‹åŠ›ç­‰çº§ / Max Level</span>
                    <span id="autopulse_pressure_max_display" class="autopulse-value-display">4</span>
                </label>
                <input type="range" id="autopulse_pressure_max" min="1" max="5" value="4" />
            </div>

            <div class="autopulse-row">
                <label class="checkbox_label" for="autopulse_pressure_return">
                    <input type="checkbox" id="autopulse_pressure_return" checked />
                    <span data-i18n="å¯ç”¨å›å½’ååº”">å¯ç”¨å›å½’ååº” / Return Reaction</span>
                </label>
                <small class="autopulse-hint">ï¼ˆå›å¤åè§’è‰²ä¼šåšå‡ºååº” / Character reacts when you returnï¼‰</small>
            </div>

            <div class="autopulse-row autopulse-test-buttons">
                <div id="autopulse_test_pressure_up" class="menu_button menu_button_icon" title="æ¨¡æ‹Ÿå‹åŠ›å‡çº§">
                    <span class="fa-solid fa-arrow-up"></span>
                    <span>å‹åŠ›+1 / Pressure+1</span>
                </div>
                <div id="autopulse_test_pressure_trigger" class="menu_button menu_button_icon" title="ä»¥å½“å‰å‹åŠ›ç­‰çº§è§¦å‘ä¸€æ¬¡æ¶ˆæ¯">
                    <span class="fa-solid fa-bolt"></span>
                    <span>æµ‹è¯•è§¦å‘ / Test Fire</span>
                </div>
                <div id="autopulse_test_return" class="menu_button menu_button_icon" title="æ¨¡æ‹Ÿå›å½’ååº”">
                    <span class="fa-solid fa-heart"></span>
                    <span>æµ‹è¯•å›å½’ / Test Return</span>
                </div>
            </div>

            <hr />

            <!-- Jealousy System -->
            <div class="autopulse-section-header">
                <b data-i18n="å«‰å¦’ç³»ç»Ÿ">å«‰å¦’ç³»ç»Ÿ / Jealousy System ğŸ’¢</b>
            </div>

            <div class="autopulse-row">
                <label class="checkbox_label" for="autopulse_jealousy_enabled">
                    <input type="checkbox" id="autopulse_jealousy_enabled" />
                    <span data-i18n="å¯ç”¨å«‰å¦’ç³»ç»Ÿ">å¯ç”¨å«‰å¦’ç³»ç»Ÿ / Enable Jealousy</span>
                </label>
                <small class="autopulse-hint">ï¼ˆåˆ‡æ¢è§’è‰²æ—¶è§¦å‘ / Triggers when switching charactersï¼‰</small>
            </div>

            <div class="autopulse-row">
                <label>
                    <span>å«‰å¦’è§’è‰² / Jealous Charactersï¼š</span>
                    <small class="autopulse-hint">ï¼ˆä¸é€‰=ä¸è§¦å‘ / None = disabledï¼‰</small>
                </label>
                <div id="autopulse_jealousy_chars" class="autopulse-char-picker">
                    <span class="autopulse-hint">åŠ è½½ä¸­...</span>
                </div>
            </div>

            <div class="autopulse-row">
                <label for="autopulse_jealousy_prompt">
                    <span>å«‰å¦’æç¤ºè¯ / Jealousy Prompt</span>
                    <small class="autopulse-hint">ï¼ˆç•™ç©ºä½¿ç”¨é»˜è®¤ / Leave empty for defaultï¼‰</small>
                </label>
                <textarea id="autopulse_jealousy_prompt" class="text_pole textarea_compact" rows="3"
                    placeholder="ç•™ç©º=é»˜è®¤ã€‚ç¤ºä¾‹ï¼šä½ å‘ç°å¯¹æ–¹åœ¨å’Œåˆ«äººèŠå¤©äº†ï¼Œç”¨1å¥è¯è¡¨è¾¾å«‰å¦’ï¼Œåƒå‘å¾®ä¿¡ä¸€æ ·ç®€çŸ­ã€‚"></textarea>
            </div>

            <div class="autopulse-row">
                <label for="autopulse_jealousy_chance">
                    <span>å«‰å¦’æ¦‚ç‡ / Trigger Chance</span>
                    <span id="autopulse_jealousy_chance_display" class="autopulse-value-display">50%</span>
                </label>
                <input type="range" id="autopulse_jealousy_chance" min="0" max="100" value="50" />
            </div>

            <div class="autopulse-row">
                <label for="autopulse_jealousy_delay_min">
                    <span>æœ€çŸ­å»¶è¿Ÿ / Min Delay (s)</span>
                    <span id="autopulse_jealousy_delay_min_display" class="autopulse-value-display">30s</span>
                </label>
                <input type="range" id="autopulse_jealousy_delay_min" min="5" max="300" value="30" />
            </div>

            <div class="autopulse-row">
                <label for="autopulse_jealousy_delay_max">
                    <span>æœ€é•¿å»¶è¿Ÿ / Max Delay (s)</span>
                    <span id="autopulse_jealousy_delay_max_display" class="autopulse-value-display">120s</span>
                </label>
                <input type="range" id="autopulse_jealousy_delay_max" min="10" max="600" value="120" />
            </div>

            <div class="autopulse-row">
                <div id="autopulse_test_jealousy" class="menu_button menu_button_icon" title="ç«‹å³è§¦å‘å½“å‰è§’è‰²çš„å«‰å¦’æ¶ˆæ¯">
                    <span class="fa-solid fa-fire"></span>
                    <span>æµ‹è¯•å«‰å¦’ / Test Jealousy</span>
                </div>
            </div>

        </div>
    </div>
</div>